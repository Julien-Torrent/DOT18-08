{% extends "app/layout.html" %}

{% block content %}
<h2>Capteurs</h2> 
    <!-- Main content -->
    <section class="content">
      <!-- Small boxes (Stat box) -->
        <div class="row">
            <div class="col-lg-6 col-xs-6">
                <div class="small-box bg-blue">
                    <div class="inner">
                        <h3>Microphone</h3>
                        <p>current state : <span id="MicIntensity">--</span> <span id="MicIntensityts">00.00.0000 00:00:00</span></p>
			            <p>previous state : <span id="pMicIntensity">--</span> <span id="pMicIntensityts">00.00.0000 00:00:00</span></p>
                    </div>
                </div>
            </div>

          
        <div class="col-lg-6 col-xs-6">
            <div class="small-box bg-yellow">
                <div class="inner">
                    <h3>Temperature</h3>
                    <p>current state : <span id="Temperature">--</span> <span id="Temperaturets">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pTemperature">--</span> <span id="pTemperaturets">00.00.0000 00:00:00</span></p>
                </div>
            </div>
        </div>

        <div class="col-lg-6 col-xs-6">
            <div class="small-box bg-aqua">
                <div class="inner">
                    <h3>Proximity horizontal</h3>

                    <p><b>prox_h_0 :</b></p>
                    <p>current state : <span id="prox_h_0">--</span> <span id="prox_h_0ts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pprox_h_0">--</span> <span id="pprox_h_0ts">00.00.0000 00:00:00</span></p>

                    <p><b>prox_h_1 :</b></p>
                    <p>current state : <span id="prox_h_1">--</span> <span id="prox_h_1ts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pprox_h_1">--</span> <span id="pprox_h_1ts">00.00.0000 00:00:00</span></p>

                    <p><b>prox_h_2 :</b></p>
                    <p>current state : <span id="prox_h_2">--</span> <span id="prox_h_2ts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pprox_h_2">--</span> <span id="pprox_h_2ts">00.00.0000 00:00:00</span></p>

                    <p><b>prox_h_3 :</b></p>
                    <p>current state : <span id="prox_h_3">--</span> <span id="prox_h_3ts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pprox_h_3">--</span> <span id="pprox_h_3ts">00.00.0000 00:00:00</span></p>

                    <p><b>prox_h_4 :</b></p>
                    <p>current state : <span id="prox_h_4">--</span> <span id="prox_h_4ts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pprox_h_4">--</span> <span id="pprox_h_4ts">00.00.0000 00:00:00</span></p>

                    <p><b>prox_h_5 :</b></p>
                    <p>current state : <span id="prox_h_5">--</span> <span id="prox_h_5ts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pprox_h_5">--</span> <span id="pprox_h_5ts">00.00.0000 00:00:00</span></p>

                    <p><b>prox_h_6 :</b></p>
                    <p>current state : <span id="prox_h_6">--</span> <span id="prox_h_6ts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pprox_h_6">--</span> <span id="pprox_h_6ts">00.00.0000 00:00:00</span></p>
                </div>
            </div>
        </div>

        <div class="col-lg-6 col-xs-6">
            <div class="small-box bg-red">
                <div class="inner">
                    <h3>Accelerometer</h3>
                    <p><b>X :</b></p>
                    <p>current state : <span id="AccelerometerX">--</span> <span id="AccelerometerXts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pAccelerometerX">--</span> <span id="pAccelerometerXts">00.00.0000 00:00:00</span></p>

                    <p><b>Y :</b></p>
                    <p>current state : <span id="AccelerometerY">--</span> <span id="AccelerometerYts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pAccelerometerY">--</span> <span id="pAccelerometerYts">00.00.0000 00:00:00</span></p>

                    <p><b>Z :</b></p>
                    <p>current state : <span id="AccelerometerZ">--</span> <span id="AccelerometerZts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pAccelerometerZ">--</span> <span id="pAccelerometerZts">00.00.0000 00:00:00</span></p>
                </div>  
            </div>
        </div>

        <div class="col-lg-6 col-xs-6">
            <div class="small-box bg-green">
                <div class="inner">
                    <h3>Proximity vertical</h3>
                    <p><b>prox_v_0 :</b></p>
                    <p>current state : <span id="prox_v_0">--</span> <span id="prox_v_0ts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pprox_v_0">--</span> <span id="pprox_v_0ts">00.00.0000 00:00:00</span></p>

                    <p><b>prox_v_1 :</b></p>
                    <p>current state : <span id="prox_v_1">--</span> <span id="prox_v_1ts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pprox_v_1">--</span> <span id="pprox_v_1ts">00.00.0000 00:00:00</span></p>
                </div>  
            </div>
        </div>
    </div>

    <br /> <br /> 

    <h2>Actuators</h2>         
        <div class="col-lg-6 col-xs-6">
            <div class="small-box bg-red">
                <div class="inner">
                    <h3>LED</h3>
                    <p>current state : <span id="LED">--</span> <span id="LEDts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pLED">--</span> <span id="pLEDts">00.00.0000 00:00:00</span></p>
                </div>
            </div>
        </div>
		
	    <div class="col-lg-6 col-xs-6">
            <div class="small-box bg-green">
                <div class="inner">
                    <h3>Distance traveled </h3>
                    <p>current state : <span id="Distance">--</span> <span id="Distancets">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pDistance">--</span> <span id="pDistancets">00.00.0000 00:00:00</span></p>
                </div>
            </div>
	    </div>

        <div class="col-lg-6 col-xs-6">
            <div class="small-box bg-blue">
                <div class="inner">
                    <h3>Obstacles encountered</h3>
                    <p>current state : <span id="Obstacles">--</span> <span id="Obstaclests">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pObstacles">--</span> <span id="pObstaclests">00.00.0000 00:00:00</span></p>
                </div>
            </div>
        </div>

		<div class="col-lg-6 col-xs-6">
		    <div class="small-box bg-yellow">
                <div class="inner">
                    <h3>Collisions detected</h3>
                    <p>current state : <span id="Collisions">--</span> <span id="Collisionsts">00.00.0000 00:00:00</span></p>
			        <p>previous state : <span id="pCollisions">--</span> <span id="pCollisionsts">00.00.0000 00:00:00</span></p>
                </div>
			</div>
        </div>
    </section>

<button id="test">test</button>

{% endblock %}

{% block scripts %}
<script type="text/javascript">

$('#test').on("click",function(){
    $.ajax({
    type: "POST",
    url: "api/sendStatus",
    data: '[{ "Name": "Temperature", "Value": 340, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "MicIntensity", "Value": 500, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "AccelerometerX", "Value": 0, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "AccelerometerY", "Value": 1, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "AccelerometerZ", "Value": 2, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "prox_h_0", "Value": 0, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "prox_h_1", "Value": 1, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "prox_h_2", "Value": 2, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "prox_h_3", "Value": 3, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "prox_h_4", "Value": 4, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "prox_h_5", "Value": 5, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "prox_h_6", "Value": 6, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "prox_v_0", "Value": 0, "TimeStamp": "23.01.2018 20:48:00" }, { "Name": "prox_v_1", "Value": 1, "TimeStamp": "23.01.2018 20:48:00" }]',
    success: function(data){
        console.log(data);         
     }
});
})



    $(document).ready(function () {
        setInterval(function () {
            $.ajax({
                type: "GET",
                url: "api/getStatus",
                success: function (data) {
                    for (var i = 0; i < data.length; i++)
                    {
                        if ($("#" + data[i]["Name"]).text() != data[i]["Value"].toString())
                        {
                            $("#p" + data[i]["Name"]).text($("#" + data[i]["Name"]).text());
                            $("#" + data[i]["Name"]).text(data[i]["Value"]);

                            $("#p" + data[i]["Name"]+"ts").text($("#" + data[i]["Name"]+"ts").text());
                            $("#" + data[i]["Name"]+"ts").text(data[i]["TimeStamp"]);
                        }
                    }
                }
            });
        }, 2000);
    })
</script>
{% endblock %}